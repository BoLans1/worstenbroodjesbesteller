<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worstenbroodje Besteller</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #fef3c7 0%, #fef0cd 100%);
            min-height: 100vh;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>

<body class="p-4">
    <div id="app" class="max-w-2xl mx-auto p-6 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg shadow-lg">
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">
                <img src="/I" alt="" sizes="64" class="mx-auto w-24 h-24" />
            </div>
            <h1 class="text-3xl font-bold text-orange-800 mb-2">
                Worstenbroodjes besteller
            </h1>
            <p class="text-gray-600">
                Laptop open laten staan? Direct bestellen bij Houben!
            </p>
            <div class="text-xs text-gray-500 mt-2">
                Bezorging naar: iO Eindhoven, Marconilaan 16, 5621 AA
            </div>
        </div>

        <div id="form-section" class="space-y-6">
            <div class="bg-white p-4 rounded-lg shadow">
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    üë• Hoeveel mensen zijn er op kantoor?
                </label>
                <input type="number" id="aantal-personen" value="10" min="1"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" />
                <div class="text-xs text-gray-500 mt-1">
                    üí° Tip: Tel jezelf ook mee!
                </div>
            </div>

            <div class="bg-white p-4 rounded-lg shadow">
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    üë§ Je naam (voor de Slack melding)
                </label>
                <input type="text" id="naam" placeholder="Bijv. Jan van IT"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" />
            </div>

            <div class="bg-white p-4 rounded-lg shadow">
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    üïê Wanneer verwacht je de broodjes?
                </label>
                <input type="time" id="lever-tijd" value="11:30"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" />
                <div class="text-xs text-gray-500 mt-1">
                    ‚ÑπÔ∏è Let op: Echte levertijd regel je in de checkout bij Houben
                </div>
            </div>

            <div id="bestelling-overzicht" class="bg-orange-100 p-4 rounded-lg border-l-4 border-orange-500">
                <h3 class="font-semibold text-orange-800 mb-3">üõí Je bestelling bij Houben:</h3>
                <div id="bestelling-details" class="space-y-2 text-sm text-orange-700">
                    <!-- Wordt gevuld door JavaScript -->
                </div>
                <div class="mt-3 pt-3 border-t border-orange-200">
                    <p class="font-semibold text-orange-800">
                        üí∞ Totale kosten: <span id="totaal-prijs">‚Ç¨15.00</span>
                    </p>
                </div>
            </div>

            <div class="flex gap-3 flex-col">
                <button id="bestel-btn"
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 text-lg pulse-animation">
                    üõí Bestel Direct bij Houben & Ga naar Betalen
                </button>

                <button id="slack-btn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    üì± Genereer alleen Slack Bericht
                </button>
            </div>

            <div class="bg-blue-50 p-4 rounded-lg text-sm text-blue-800">
                <h4 class="font-semibold mb-2">‚ÑπÔ∏è Hoe werkt het?</h4>
                <ul class="list-disc list-inside space-y-1">
                    <li><strong>Bestel Direct:</strong> Opent Houben website met jouw bestelling, je hoeft alleen te
                        betalen</li>
                    <li><strong>Slack Bericht:</strong> Genereert een bericht dat je in Slack kunt plakken</li>
                    <li><strong>Bezorgadres:</strong> Voer handmatig iO Eindhoven adres in bij checkout</li>
                    <li><strong>Portieberekening:</strong> 1 bestelling van 6 broodjes per 6 personen</li>
                </ul>
            </div>
        </div>

        <div id="slack-result-section" class="space-y-6 hidden">
            <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                <h3 class="font-semibold text-gray-800 mb-3">üéâ Slack bericht klaar!</h3>
                <div class="bg-gray-50 p-4 rounded border text-sm whitespace-pre-wrap" id="slack-message">
                </div>
            </div>

            <div class="flex gap-3 flex-col sm:flex-row">
                <button id="copy-btn"
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    üìã Kopieer Slack Bericht
                </button>
                <button id="bestel-nu-btn"
                    class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    üõí Ga nu Bestellen
                </button>
            </div>

            <button id="terug-btn"
                class="w-full bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors">
                ‚Üê Terug naar invoer
            </button>
        </div>
    </div>

    <script>
        // Houben Worstenbrood product varianten (van hun website)
        const HOUBEN_VARIANTS = {
            6: { id: '50020545823062', prijs: 15.00, naam: '6 stuks traditionele worstenbroodjes' },
            24: { id: '50020545855830', prijs: 52.00, naam: '24 stuks traditionele worstenbroodjes' }
        };

        function berekenBestelling(aantalPersonen) {
            // 1 verpakking van 6 broodjes per 6 personen
            const pakketten6 = Math.ceil(aantalPersonen / 6);
            const totaalBroodjes = pakketten6 * 6;
            const totaalPrijs = pakketten6 * HOUBEN_VARIANTS[6].prijs;

            return {
                pakketten6: pakketten6,
                totaalBroodjes: totaalBroodjes,
                totaalPrijs: totaalPrijs,
                houbenItems: [
                    {
                        variant: HOUBEN_VARIANTS[6],
                        quantity: pakketten6
                    }
                ]
            };
        }

        function updateBestelling() {
            const aantalPersonen = parseInt(document.getElementById('aantal-personen').value) || 1;
            const bestelling = berekenBestelling(aantalPersonen);

            // Update bestelling overzicht
            const detailsEl = document.getElementById('bestelling-details');
            detailsEl.innerHTML = `
                <div class="flex justify-between items-center">
                    <span>üì¶ ${bestelling.pakketten6}x bestelling van 6 broodjes</span>
                    <span class="font-semibold">‚Ç¨${(bestelling.pakketten6 * HOUBEN_VARIANTS[6].prijs).toFixed(2)}</span>
                </div>
                <div class="text-gray-600">
                    ü•ñ Totaal: ${bestelling.totaalBroodjes} worstenbroodjes voor ${aantalPersonen} mensen
                </div>
                <div class="text-yellow-700 font-medium">
                    üìç Bezorgadres: Voer handmatig in: Marconilaan 16, 5621 AA Eindhoven
                </div>
            `;

            document.getElementById('totaal-prijs').textContent = `‚Ç¨${bestelling.totaalPrijs.toFixed(2)}`;

            return bestelling;
        }

        function createHoubenCheckoutUrl(bestelling) {
            // Gebruik de simpelere Shopify format: √©√©n item per keer
            const quantity = bestelling.pakketten6;
            const variantId = HOUBEN_VARIANTS[6].id;

            // Eenvoudige Shopify cart add URL
            const checkoutUrl = `https://www.houbenworstenbrood.nl/cart/add?id=${variantId}&quantity=${quantity}&return_to=/cart`;

            return checkoutUrl;
        }

        function generateSlackMessage() {
            const aantalPersonen = parseInt(document.getElementById('aantal-personen').value) || 1;
            const naam = document.getElementById('naam').value || 'De schuldige laptopverlater';
            const leverTijd = document.getElementById('lever-tijd').value;
            const bestelling = berekenBestelling(aantalPersonen);

            return `Oh jee, mijn laptop stond open. Iedereen kon bij mijn belangrijke bestanden. Kunnen jullie me vergeven? Geen zorgen, de worstenbroodjes zijn al besteld. ü•ñ

Worstenbroodjes van Houben:
Aantal: ${bestelling.totaalBroodjes} worstenbroodjes (${bestelling.pakketten6}x verpakking van 6 stuks)
Voor: ${aantalPersonen} hongerige collega's
Broodjes worden verwacht: ${leverTijd}

Ik beloof mijn laptop voortaan netjes af te sluiten! üîê

- ${naam}`;
        }

        function openHoubenBestelling() {
            const bestelling = updateBestelling();
            const checkoutUrl = createHoubenCheckoutUrl(bestelling);

            // Open in new window
            window.open(checkoutUrl, '_blank');

            // Show confirmation message
            setTimeout(() => {
                alert('üéâ Bestelling geopend!\n\n' +
                    '‚úÖ Controleer je bestelling in de winkelwagen\n' +
                    'üìç Voer bezorgadres in: Marconilaan 16, 5621 AA Eindhoven\n' +
                    'üí≥ Ga naar checkout en rond de betaling af\n' +
                    'üì± Deel het nieuws in Slack!');
            }, 1000);
        }

        function showSlackResult() {
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('slack-result-section').classList.remove('hidden');
            document.getElementById('slack-message').textContent = generateSlackMessage();
        }

        function showForm() {
            document.getElementById('form-section').classList.remove('hidden');
            document.getElementById('slack-result-section').classList.add('hidden');
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(generateSlackMessage());
                alert('Slack bericht gekopieerd! Plak het nu in jullie kanaal üìã');
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = generateSlackMessage();
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Slack bericht gekopieerd! Plak het nu in jullie kanaal üìã');
            }
        }

        // Event listeners
        document.getElementById('aantal-personen').addEventListener('input', updateBestelling);
        document.getElementById('bestel-btn').addEventListener('click', openHoubenBestelling);
        document.getElementById('slack-btn').addEventListener('click', showSlackResult);
        document.getElementById('copy-btn').addEventListener('click', copyToClipboard);
        document.getElementById('bestel-nu-btn').addEventListener('click', openHoubenBestelling);
        document.getElementById('terug-btn').addEventListener('click', showForm);

        // Initialize
        updateBestelling();
    </script>
</body>

</html>